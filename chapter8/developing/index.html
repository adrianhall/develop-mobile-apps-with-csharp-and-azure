
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Adrian Hall">
      
      
        <link rel="canonical" href="https://adrianhall.github.io/develop-mobile-apps-with-csharp-and-azure/chapter8/developing/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.14">
    
    
      
        <title>The Development Environment - Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3de6f41f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/vs.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-development-environment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure" class="md-header__button md-logo" aria-label="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              The Development Environment
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure" class="md-nav__button md-logo" aria-label="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Chapter 1 - Introduction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 1 - Introduction" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Chapter 1 - Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter1/firstapp_pc/" class="md-nav__link">
        Your First App - PC Edition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter1/firstapp_mac/" class="md-nav__link">
        Your First App - Mac Edition
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Chapter 2 - Authentication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 2 - Authentication" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Chapter 2 - Authentication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/authconcepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/backend/" class="md-nav__link">
        Authentication in the Backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/enterprise/" class="md-nav__link">
        Enterprise Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/social/" class="md-nav__link">
        Social Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/debugging/" class="md-nav__link">
        Debugging Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/custom/" class="md-nav__link">
        Custom Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/authorization/" class="md-nav__link">
        Claims and Authorization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/realworld/" class="md-nav__link">
        Tokens in Real Apps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/bestpractices/" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Chapter 3 - Data Access and Offline Sync
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 3 - Data Access and Offline Sync" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Chapter 3 - Data Access and Offline Sync
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/dataconcepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/server/" class="md-nav__link">
        Implementing Table Controllers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/projection/" class="md-nav__link">
        Data Projection and Queries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/client/" class="md-nav__link">
        The Mobile Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/relationships/" class="md-nav__link">
        Relationships
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/domainmgr/" class="md-nav__link">
        The Domain Manager
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Chapter 4 - Server Side Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 4 - Server Side Code" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Chapter 4 - Server Side Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter4/options/" class="md-nav__link">
        Options for Server Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter4/custom/" class="md-nav__link">
        Custom HTTP Endpoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter4/webjobs/" class="md-nav__link">
        WebJobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter4/functions/" class="md-nav__link">
        Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter4/recipes/" class="md-nav__link">
        Recipes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Chapter 5 - Push Notifications
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 5 - Push Notifications" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Chapter 5 - Push Notifications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter5/concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter5/android/" class="md-nav__link">
        Android Push
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter5/ios/" class="md-nav__link">
        iOS Push
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter5/windows/" class="md-nav__link">
        Windows Push
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter5/recipes/" class="md-nav__link">
        Push Recipes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Chapter 6 - Combining Web and Mobile Apps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 6 - Combining Web and Mobile Apps" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Chapter 6 - Combining Web and Mobile Apps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter6/mvc/" class="md-nav__link">
        MVC Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter6/jquery/" class="md-nav__link">
        jQuery Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter6/angular/" class="md-nav__link">
        Angular Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter6/react/" class="md-nav__link">
        React Applications
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Chapter 7 - Other Useful Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 7 - Other Useful Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Chapter 7 - Other Useful Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter7/services/" class="md-nav__link">
        Useful Azure Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter7/search/" class="md-nav__link">
        Azure Search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter7/media/" class="md-nav__link">
        Media Services
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Chapter 8 - Developing An App
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 8 - Developing An App" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Chapter 8 - Developing An App
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          The Development Environment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        The Development Environment
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#working-with-azure-mobile-apps-locally" class="md-nav__link">
    Working with Azure Mobile Apps Locally
  </a>
  
    <nav class="md-nav" aria-label="Working with Azure Mobile Apps Locally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-sql-express-for-local-development" class="md-nav__link">
    Configuring SQL Express for Local Development
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-sql-azure-for-local-development" class="md-nav__link">
    Configuring SQL Azure for Local Development
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-cloud-services-while-developing-locally" class="md-nav__link">
    Handling Cloud Services while Developing Locally
  </a>
  
    <nav class="md-nav" aria-label="Handling Cloud Services while Developing Locally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#handling-authentication" class="md-nav__link">
    Handling Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-push-notifications" class="md-nav__link">
    Handling Push Notifications
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-your-cloud-mobile-backend" class="md-nav__link">
    Debugging your Cloud Mobile Backend
  </a>
  
    <nav class="md-nav" aria-label="Debugging your Cloud Mobile Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagnostic-logging" class="md-nav__link">
    Diagnostic Logging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-visual-studio-debugger" class="md-nav__link">
    Using the Visual Studio Debugger
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        Testing your Application
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Chapter 9 - Going to Production
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 9 - Going to Production" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Chapter 9 - Going to Production
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter9/arm/" class="md-nav__link">
        Repeatable Deployments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter9/appsvc/" class="md-nav__link">
        Safe Deployments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter9/monitoring/" class="md-nav__link">
        Monitoring and Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../xamarin_tips/" class="md-nav__link">
        Xamarin Forms Tips
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../android_appendix/" class="md-nav__link">
        Android Developer Notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../vs_extensions/" class="md-nav__link">
        Visual Studio Extensions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../references/" class="md-nav__link">
        References
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#working-with-azure-mobile-apps-locally" class="md-nav__link">
    Working with Azure Mobile Apps Locally
  </a>
  
    <nav class="md-nav" aria-label="Working with Azure Mobile Apps Locally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-sql-express-for-local-development" class="md-nav__link">
    Configuring SQL Express for Local Development
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-sql-azure-for-local-development" class="md-nav__link">
    Configuring SQL Azure for Local Development
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-cloud-services-while-developing-locally" class="md-nav__link">
    Handling Cloud Services while Developing Locally
  </a>
  
    <nav class="md-nav" aria-label="Handling Cloud Services while Developing Locally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#handling-authentication" class="md-nav__link">
    Handling Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-push-notifications" class="md-nav__link">
    Handling Push Notifications
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-your-cloud-mobile-backend" class="md-nav__link">
    Debugging your Cloud Mobile Backend
  </a>
  
    <nav class="md-nav" aria-label="Debugging your Cloud Mobile Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagnostic-logging" class="md-nav__link">
    Diagnostic Logging
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-visual-studio-debugger" class="md-nav__link">
    Using the Visual Studio Debugger
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure/edit/master/docs/chapter8/developing.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="the-development-environment">The Development Environment<a class="headerlink" href="#the-development-environment" title="Permanent link">&para;</a></h1>
<p>In these last two chapters, I want to go over some of the complexities of developing mobile applications when there is a
cloud-enabled backend.  Working with cloud services presents its own special challenges, especially when you use the
features of the provider.  In the case of Azure App Service, this means that dealing with App Service Authentication
and App Service Push requires some special configuration.</p>
<h2 id="working-with-azure-mobile-apps-locally">Working with Azure Mobile Apps Locally<a class="headerlink" href="#working-with-azure-mobile-apps-locally" title="Permanent link">&para;</a></h2>
<p>In general, you can use Azure Mobile Apps locally by running inside a local IIS container.  If you are using
Visual Studio, then this is set up for you.  However, you will need to handle the SQL database connection.
You have two choices for this.  Firstly, you can use a SQL Azure instance and just point your server to that
instance.  Secondly, you can install SQL Express and use that instance instead.  Both are perfectly viable
options.  I like to use SQL Express in early development, then switch over to a SQL Azure instance as I get
closer to deployment.  Switching over when you are close to deployment enables to you detect any problems
in upgrades or the use of encrypted channels.</p>
<h3 id="configuring-sql-express-for-local-development">Configuring SQL Express for Local Development<a class="headerlink" href="#configuring-sql-express-for-local-development" title="Permanent link">&para;</a></h3>
<p>Start by downloading and installing the <a href="https://www.microsoft.com/en-us/sql-server/sql-server-editions-express">Microsoft SQL Server Express</a> edition.  Azure Mobile Apps will work
with just about any recent SQL Server Express edition.  I personally recommend the
<a href="https://go.microsoft.com/fwlink/?LinkID=799012"><strong>SQL Server 2016 SP1 Express</strong></a> edition.</p>
<p>The process by which SQL Server Express is installed varies by edition and version, so keep these tips in mind.</p>
<ul>
<li>Always elect the custom installation option.</li>
<li>You need the Database Engine and the <a href="https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms">Management Tools</a> (possibly via separate download)</li>
<li>You do not need reporting or integration services.</li>
<li>Use <strong>Mixed mode</strong> for authentication and set an <strong>sa</strong> password.</li>
<li>If possible, place the data directories on a different disk.</li>
</ul>
<p>Once you have installed the database engine and management tools, you will need to create a user that has
permissions to create databases:</p>
<ol>
<li>Run the SQL Server Management Studio and connect to your local SQL Express instance.</li>
<li>Ensure the <strong>SQL Server and Windows Authentication mode</strong> is checked in the <strong>Properties</strong> &gt; <strong>Security</strong> page.</li>
<li>Expand <strong>Security</strong> &gt; <strong>Logins</strong> in the <strong>Object Explorer</strong>.</li>
<li>Right-click the <strong>Logins</strong> node and select <strong>New login...</strong>.
    a.  Enter a unique login name
    b.  Select <strong>SQL Server authentication</strong>.
    c.  Enter a password, then enter the same password in <strong>Confirm password</strong>.
    d.  Click <strong>OK</strong>.</li>
<li>Right-click on your new login and select <strong>Properties</strong>.
    a.  Click <strong>Server Roles</strong> under <strong>Select a page</strong>.
    b.  Check the box next to the <strong>dbcreator</strong> role.
    c. Click <strong>OK</strong>.</li>
<li>Close the SQL Server Management Studio.</li>
</ol>
<p>Ensure you record the username and password you selected.  You may need to assign additional server roles
or permissions depending on your specific database requirements.  Your connection string will need to look
like this:</p>
<pre><code class="language-text">Server=127.0.0.1; Database=mytestdatabase; User Id=azuremobile; Password=T3stPa55word;
</code></pre>
<p>Replace the user ID and password with the user ID and password you just created.  The database will be created
for you, so ensure it is rememberable.  To set the connection string, you will need to edit the <code>Web.config</code>
file.  At around line 12, you will see the default connection string.  Simply replace it with your SQL Express
connection string:</p>
<pre><code class="language-xml">  &lt;connectionStrings&gt;
    &lt;add name=&quot;MS_TableConnectionString&quot;
        connectionString=&quot;Data Server=127.0.0.1; Database=mytestdatabase; User Id=azuremobile; Password=T3stPa55word;&quot;
        providerName=&quot;System.Data.SqlClient&quot; /&gt;
  &lt;/connectionStrings&gt;
</code></pre>
<p>You should now be able to press F5 on your server and run it locally.</p>
<h3 id="configuring-sql-azure-for-local-development">Configuring SQL Azure for Local Development<a class="headerlink" href="#configuring-sql-azure-for-local-development" title="Permanent link">&para;</a></h3>
<p>I have already discussed creating a SQL Azure instance.  By default, however, the SQL Azure instance
can only be used by other Azure resources as a security measure.  There is a firewall that limits
connectivity from the Internet to your database.  To run your server locally while connecting to the
SQL Azure instance, you need to do two things:</p>
<ol>
<li>Open the firewall for connections from your IP address.</li>
<li>Update the connection string in your servers <code>Web.config</code> file.</li>
</ol>
<p>From your development system (the workstation that you will be using to run the service locally),
open a browser and log into the <a href="https://portal.azure.com/">Azure portal</a>.  You will note that there are two resources for your
SQL database - a server and a database.  Open the resource for the SQL server, then:</p>
<ul>
<li>Click the <strong>Firewall</strong> menu option.</li>
<li>Click <strong>+ Add client IP</strong>.</li>
<li>Click <strong>Save</strong>, then <strong>OK</strong>.</li>
</ul>
<p>If you are using a different workstation to run the service, then you can enter an explicit IP
address.  To get the connection strings:</p>
<ul>
<li>From the SQL Server <strong>Overview</strong> page, click the SQL database.</li>
<li>From the SQL database <strong>Overview</strong> page, click <strong>Show database connection strings</strong>.</li>
<li>Copy the ADO.NET (SQL authentication) connection string.</li>
</ul>
<p>This will need to be copied into the <code>Web.config</code> in the same way as the SQL Express version (above).
You will need to replace the <code>{your_username}</code> and <code>{your_password}</code> strings with the username and
password of your SQL server.  If you can't remember them, look in your App Service - they are available
in the configured connection string under <strong>Application Settings</strong>.</p>
<p>Once this done, you will be able to press F5 on your server and run it locally.</p>
<h2 id="handling-cloud-services-while-developing-locally">Handling Cloud Services while Developing Locally<a class="headerlink" href="#handling-cloud-services-while-developing-locally" title="Permanent link">&para;</a></h2>
<p>At this point, you have done plenty of test runs in the cloud and you have also run both your client
and the server locally.  However,t here are certain problems when you are running the server locally
but using the Azure App Service resources for pieces of your application.  The two main resources that
mobile developers use in Azure App Service are authentication and registration for push notifications.
The basics for these facilities were covered in <a href="../../chapter2/authconcepts/">Chapter 2</a> and <a href="../../chapter5/concepts/">Chapter 5</a> respectively.  There
are some additional code requirements when you want to run your main server locally for debugging.</p>
<h3 id="handling-authentication">Handling Authentication<a class="headerlink" href="#handling-authentication" title="Permanent link">&para;</a></h3>
<p>When dealing with authentication, you want the majority of your requests to go to your main server, but you
want your authentication requests to go to the Azure App Service you are using for development.  To set
this scenario up, you need to configure your mobile client to connect to your Azure App Service and receive
a token, then continue using the local server.  You also need to configure your local server so that it
can decode the token.</p>
<p>The Azure Mobile Apps Client SDK has a setting called <code>AlternateLoginUrl</code>.  You can specify the URL of the
Azure App Server in this if you are operating against a local server.  For example:</p>
<pre><code class="language-csharp">namespace TaskList.Helpers
{
    public static class Locations
    {
//#if DEBUG
//        public static readonly string AppServiceUrl = &quot;http://localhost:17568/&quot;;
//        public static readonly string AlternateLoginHost = &quot;https://the-book.azurewebsites.net&quot;;
//#else
        public static readonly string AppServiceUrl = &quot;https://the-book.azurewebsites.net&quot;;
        public static readonly string AlternateLoginHost = null;
//#endif
    }
}
</code></pre>
<p>In this snippet (from the Chapter 2 test project), I get the <code>AlternateLoginHost</code> set only if I define the
DEBUG setting in my build properties.  When I create the <code>MobileServiceClient</code>, I can use this logic to set
the <code>AlternateLoginUrl</code>:</p>
<pre><code class="language-csharp">    public AzureCloudService()
    {
        client = new MobileServiceClient(Locations.AppServiceUrl, new AuthenticationDelegatingHandler());

        if (Locations.AlternateLoginHost != null)
            client.AlternateLoginHost = new Uri(Locations.AlternateLoginHost);
    }
</code></pre>
<p>To set the DEBUG setting, I can right-click on the project and select <strong>Properties</strong>, then select <strong>Build</strong> in
the resulting window.  The  <strong>Define DEBUG constant</strong> is available in this window:</p>
<p><img alt="" src="../img/build-options.PNG" /></p>
<p>Since my location is only set when the DEBUG constant is set, this allows me to switch between the two modes.
There are other ways to switch between the two modes if you also want to support debug mode against an Azure
App Service based server.  One of my favorites is to have an application setting that enabled "local mode".
When I check that, I can specify a local URL.  At that point, the <code>AppServerUrl</code> is set to what I enter and
the <code>AlternateLoginUrl</code> becomes the original value of the <code>AppServiceUrl</code> - effectively swapping to the local
server but preserving the auth configuration.</p>
<p>Now that I've enabled the mobile client for local development, I also need to enable the local server.  The
local server should have the following code already within the <code>App_Start\Startup.MobileApps.cs</code> file:</p>
<pre><code class="language-csharp">    MobileAppSettingsDictionary settings = config.GetMobileAppSettingsProvider().GetMobileAppSettings();

    if (string.IsNullOrEmpty(settings.HostName))
    {
        app.UseAppServiceAuthentication(new AppServiceAuthenticationOptions
        {
            // This middleware is intended to be used locally for debugging. By default, HostName will
            // only have a value when running in an App Service application.
            SigningKey = ConfigurationManager.AppSettings[&quot;SigningKey&quot;],
            ValidAudiences = new[] { ConfigurationManager.AppSettings[&quot;ValidAudience&quot;] },
            ValidIssuers = new[] { ConfigurationManager.AppSettings[&quot;ValidIssuer&quot;] },
            TokenHandler = config.GetAppServiceTokenHandler()
        });
    }
</code></pre>
<p>This code says "if the service is not running within Azure App Service, then validate the authentication
tokens using the following information".  We need the information provided from the Azure App Service that
is producing the tokens.  To obtain this information, we need to peek into <strong>Kudu</strong> - a backend service
for examining the information that Azure App Service uses to run the service.</p>
<ol>
<li>Log on to the <a href="https://portal.azure.com/">Azure portal</a>.</li>
<li>Select your Azure App Service.</li>
<li>In the left-hand menu for the server, type <strong>Advanced Tools</strong> in the search box.</li>
<li>Click <strong>Advanced Tools</strong>, then click <strong>Go</strong>.</li>
<li>In the new window, click <strong>Environment</strong>, then <strong>Environment variables</strong>.</li>
<li>Scroll down (or use search) to find <strong>WEBSITE_AUTH_SIGNING_KEY</strong>.</li>
</ol>
<p>Your required values are:</p>
<ul>
<li><strong>SigningKey</strong> is the <strong>WEBSITE_AUTH_SIGNING_KEY</strong> above.</li>
<li><strong>ValidAudience</strong> and <strong>ValidIssuer</strong> are both of the form <code>https://{your-sitename}/</code>.</li>
</ul>
<p>Once you have these two values, you can insert them into the <code>Web.config</code> file for local development:</p>
<pre><code class="language-xml">  &lt;appSettings&gt;
    &lt;add key=&quot;PreserveLoginUrl&quot; value=&quot;true&quot; /&gt;
    &lt;add key=&quot;MS_SigningKey&quot; value=&quot;Overridden by portal settings&quot; /&gt;
    &lt;add key=&quot;EMA_RuntimeUrl&quot; value=&quot;Overridden by portal settings&quot; /&gt;
    &lt;add key=&quot;MS_NotificationHubName&quot; value=&quot;Overridden by portal settings&quot; /&gt;
    &lt;add key=&quot;SigningKey&quot; value=&quot;4CFD0AA0148455E90F076F58D401377DA9D2443CC5C2E64E36C2D5FC96A71E9C&quot; /&gt;
    &lt;add key=&quot;ValidAudience&quot; value=&quot;https://the-book.azurewebsites.net/&quot; /&gt;
    &lt;add key=&quot;ValidIssuer&quot; value=&quot;https://the-book.azurewebsites.net/&quot; /&gt;
  &lt;/appSettings&gt;
</code></pre>
<p>These values will be overridden by the portal settings when operating within the Azure App Service.  You
can now run the local server and the mobile client locally while authenticating via the Azure-based App
Service.</p>
<h3 id="handling-push-notifications">Handling Push Notifications<a class="headerlink" href="#handling-push-notifications" title="Permanent link">&para;</a></h3>
<p>In chapter 5, I espoused using <code>InvokeApiAsync&lt;&gt;()</code> to register for push notifications, mostly because it
enabled me to register with a Notification Hubs <code>Installation</code> object rather than just my registration ID.
This enabled me, for example, to register with tags for better audience selection.  If you look at how the
<a href="https://github.com/Azure/azure-mobile-apps-net-client/blob/2e64164a06233ed2f1596fe336129a378eea4000/src/Microsoft.WindowsAzure.MobileServices/MobileServiceClient.cs#L664">InvokeApiAsync</a> method is implemented:</p>
<pre><code class="language-csharp">    private async Task&lt;string&gt; InternalInvokeApiAsync(string apiName, string content, HttpMethod method, IDictionary&lt;string, string&gt; parameters, MobileServiceFeatures features, CancellationToken cancellationToken = default(CancellationToken))
    {
        method = method ?? defaultHttpMethod;
        if (parameters != null &amp;&amp; parameters.Count &gt; 0)
        {
            features |= MobileServiceFeatures.AdditionalQueryParameters;
        }

        MobileServiceHttpResponse response = await this.HttpClient.RequestAsync(method, CreateAPIUriString(apiName, parameters), this.CurrentUser, content, false, features: features, cancellationToken: cancellationToken);
        return response.Content;
    }
</code></pre>
<p>You will note it's just a HTTP request with some serialization and deserialization around it.  I can
replicate this by creatign a new <code>HttpClient</code> object and publishing the same serialized content.  I'm
not concerned with the actual response, so this is fairly easy.  The adjusted code might look something
like this:</p>
<pre><code class="language-csharp">    try
    {
        var registrationId = GcmClient.GetRegistrationId(RootView);
        var client = new HttpClient(new Uri(Locations.AlternateLoginHost ?? Locations.AppServiceUrl));

        var installation = new DeviceInstallation
        {
            InstallationId = client.InstallationId,
            Platform = &quot;gcm&quot;,
            PushChannel = registrationId
        };
        installation.Tags.Add(&quot;topic:Sports&quot;);
        installation.Templates.Add(&quot;genericTemplate&quot;, new PustTemplate
        {
            Body = &quot;{\&quot;data\&quot;:{\&quot;message\&quot;:\&quot;$(messageParam)\&quot;}}&quot;
        });

        // Register with NH
        var json = JsonConvert.SerializeObject(installation).ToString();
        var response = await client.PutAsync(
            $&quot;/push/installations/{client.InstallationId}&quot;,
            new StringContent(json, Encoding.UTF8, &quot;application/json&quot;));
        if (!response.IsSuccessStatusCode)
        {
            throw new MobileServiceInvalidOperationException(&quot;Invalid Response&quot;, null, response);
        }
    }
    catch (Exception ex)
    {
        Log.Error(&quot;DroidPlatformProvider&quot;, $&quot;Could not register with NH: {ex.Message}&quot;);
    }
</code></pre>
<p>This uses a new HttpClient that is created for the purposes of registering with Notification Hubs.  I have
to handle all the serialization of the objects myself because I'm not operating in the confines of the
Azure Mobile Apps SDK any more.  The code differences here are minimal.</p>
<p>Another way to deal with this is to stub the <code>/push/installations</code> endpoint in your server during local
debugging with a standard WebAPI controller.  This allows you to verify that the data being sent to the
server is correct (i.e. your client code is correct) without actually registering for push notifications.
You will not receive push notifications until you publish your service to Azure App Service and properly
configure the App Service Push feature.  Your controller will be over-ridden by App Service Push when you
do publish to Azure App Service.</p>
<h2 id="debugging-your-cloud-mobile-backend">Debugging your Cloud Mobile Backend<a class="headerlink" href="#debugging-your-cloud-mobile-backend" title="Permanent link">&para;</a></h2>
<p>When you are running the server locally, you can easily set breakpoints, view the state of the service,
and emit log events that are captured in the Output window of your Visual Studio IDE.  When you are
running the server within Azure App Service, you can still do all these things.  However, they are slower
because you are accessing the service over the Internet rather than on your local machine.  They also
take a little bit more to set up.</p>
<h3 id="diagnostic-logging">Diagnostic Logging<a class="headerlink" href="#diagnostic-logging" title="Permanent link">&para;</a></h3>
<p>Diagnostic logging is my preferred way of isolating problems.  This is mostly because you can see historical
context - what happened in what order - and you don't need to have a debugger attached to the process to
use it.  This means that diagnostic logging should be provided even after your service has move to
production.  However, diagnostic logging does require you to decide what information is important and
to emit events associated with that information.</p>
<p>You can configure diagnostic logging within the <a href="https://portal.azure.com/">Azure portal</a> or within Visual Studio.  To configure
diagnostic logging in the <a href="https://portal.azure.com/">Azure portal</a>:</p>
<ol>
<li>Open the <a href="https://portal.azure.com/">Azure portal</a> and select your Azure App Service.</li>
<li>In the left-hand menu search box, type <strong>Diagnostic logs</strong>.</li>
<li>Click the <strong>Diagnostic Logs</strong> menu item.</li>
<li>In the Diagnostic logs page, turn on the following items:
    a. <strong>Application Logging (Filesystem)</strong> (also set the <strong>Level</strong> to <strong>Verbose</strong>)
    b. <strong>Web server logging</strong> (select <strong>File System</strong>)
    c. <strong>Detailed error messages</strong>
    d. <strong>Failed request tracing</strong></li>
<li>Click <strong>Save</strong></li>
</ol>
<p>You can view the stream of logs from the <a href="https://portal.azure.com/">Azure portal</a> by selecting your Azure App Service and then using
the <strong>Log Stream</strong> menu option in the left-hand menu.  The logs are also available as text files via Kudu
(<strong>Advanced Tools</strong> in the left-hand menu) or via FTP (the location and login ID are provided on the
<strong>Diagnostic Logs</strong> screen).</p>
<p>To configure diagnostic logging within Visual Studio:</p>
<ol>
<li>Use <strong>View</strong> &gt; <strong>Server Explorer</strong> to show the Server Explorer.</li>
<li>Expand the <strong>Azure</strong> node, then <strong>App Service</strong>, then your resource group.</li>
<li>Right-click your Azure App Service and select <strong>View Settings</strong>.</li>
<li>In the Configuration panel, select the following:
    a.  <strong>Web Server Logging</strong> = On
    b.  <strong>Detailed Error Messages</strong> = On
    c.  <strong>Failed Request Tracing</strong> = On
    d.  <strong>Application Logging (File System)</strong> = Verbose</li>
<li>Click <strong>Save</strong>.</li>
</ol>
<p>You can view the stream of logs from Visual Studio by right-clicking your Azure App Service within the
<strong>Server Explorer</strong>, then selecting <strong>View Streaming Logs</strong>.  The logs appear in a section of the <strong>Output</strong>
window called <strong>Microsoft Azure Logs - {your-site}</strong>.  The first message received will indicate that
visual Studio is connected to the log-streaming service.</p>
<h3 id="using-the-visual-studio-debugger">Using the Visual Studio Debugger<a class="headerlink" href="#using-the-visual-studio-debugger" title="Permanent link">&para;</a></h3>
<p>Even though diagnostic logging will probably be your go-to troubleshooting tool in the long run, there are
times when you need to set a breakpoint and step through the code during development.  In my experience, this
happens quite a lot, especially when there are differences between how the server reacts when running locally
vs. when running within Azure.</p>
<p>Before you attach a debugger to an App Service running within Azure, you need to turn on remote debugging.
This should <strong>NOT</strong> be done on a production service.  You can turn on remote debugging within Visual Studio
or in the Azure portal.  For Visual Studio:</p>
<ol>
<li>Use <strong>View</strong> &gt; <strong>Server Explorer</strong> to show the Server Explorer.</li>
<li>Expand the <strong>Azure</strong> node, then <strong>App Service</strong>, then your resource group.</li>
<li>Right-click your Azure App Service and select <strong>View Settings</strong>.</li>
<li>In the Configuration panel, set <strong>Remote Debugging</strong> = On.</li>
<li>Click <strong>Save</strong>.</li>
</ol>
<p>In the <a href="https://portal.azure.com/">Azure portal</a>, the remote debugging option is set through the <strong>Application settings</strong> menu option.
You will need to set the Remote Visual Studio version to be the same version as your copy of Visual Studio.</p>
<p>To debug your service, deploy a Debug version of your server.  Then right-click the App Service within the
<strong>Server Explorer</strong> and select <strong>Attach Debugger</strong>.  You can now set breakpoints and step through the code.</p>
<div class="admonition tip">
<p class="admonition-title">Server Hangups</p>
<p>Using the debugger is also a great way to ensure that your mobile client handles slow links and service
interruptions gracefully.  As developers, we tend to have pretty good cellular coverage and fast connections
to the Internet, but your users probably won't be in that situation.  Set a breakpoint on the <code>GetAll()</code>
method of your controller, trigger a synchronization, and then let the service just sit there at the
breakpoint.  Your mobile client will time out and you can see the effect of a bad connection.</p>
</div>
<p>One of the other significant things you can do with your server when remote debugging is turned on is to profile
the server.  Profiling is a good way of determining performance bottlenecks in your code.  Azure App Service
supports <a href="https://azure.microsoft.com/en-us/blog/remote-profiling-support-in-azure-app-service/">remote profiling within Visual Studio</a> for the server component.  Use the <a href="https://www.xamarin.com/profiler">Xamarin Profiler</a> to
profile your mobile application.</p>
<!-- Images -->
<!-- Links -->

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../chapter7/media/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Media Services" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Media Services
            </div>
          </div>
        </a>
      
      
        
        <a href="../testing/" class="md-footer__link md-footer__link--next" aria-label="Next: Testing your Application" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Testing your Application
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2017-2020 Adrian Hall
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/adrianhall" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/FizzyInTheHall" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c2e1ee47.min.js"></script>
      
        <script src="../../js/highlight.pack.js"></script>
      
    
  </body>
</html>