
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Adrian Hall">
      
      
        <link rel="canonical" href="https://adrianhall.github.io/develop-mobile-apps-with-csharp-and-azure/chapter4/webjobs/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.14">
    
    
      
        <title>WebJobs - Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3de6f41f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/vs.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#a-database-clean-up-webjob" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure" class="md-header__button md-logo" aria-label="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              WebJobs
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure" class="md-nav__button md-logo" aria-label="Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Develop Cloud Connected Mobile Apps with Xamarin and Microsoft Azure
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Chapter 1 - Introduction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 1 - Introduction" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Chapter 1 - Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter1/firstapp_pc/" class="md-nav__link">
        Your First App - PC Edition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter1/firstapp_mac/" class="md-nav__link">
        Your First App - Mac Edition
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Chapter 2 - Authentication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 2 - Authentication" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Chapter 2 - Authentication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/authconcepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/backend/" class="md-nav__link">
        Authentication in the Backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/enterprise/" class="md-nav__link">
        Enterprise Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/social/" class="md-nav__link">
        Social Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/debugging/" class="md-nav__link">
        Debugging Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/custom/" class="md-nav__link">
        Custom Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/authorization/" class="md-nav__link">
        Claims and Authorization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/realworld/" class="md-nav__link">
        Tokens in Real Apps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter2/bestpractices/" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Chapter 3 - Data Access and Offline Sync
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 3 - Data Access and Offline Sync" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Chapter 3 - Data Access and Offline Sync
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/dataconcepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/server/" class="md-nav__link">
        Implementing Table Controllers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/projection/" class="md-nav__link">
        Data Projection and Queries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/client/" class="md-nav__link">
        The Mobile Client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/relationships/" class="md-nav__link">
        Relationships
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter3/domainmgr/" class="md-nav__link">
        The Domain Manager
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Chapter 4 - Server Side Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 4 - Server Side Code" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Chapter 4 - Server Side Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../options/" class="md-nav__link">
        Options for Server Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/" class="md-nav__link">
        Custom HTTP Endpoints
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          WebJobs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        WebJobs
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-database-clean-up-webjob" class="md-nav__link">
    A Database Clean Up WebJob
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-image-resizing-webjob" class="md-nav__link">
    An Image Resizing WebJob
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benefits-and-drawbacks-of-webjobs" class="md-nav__link">
    Benefits and Drawbacks of WebJobs
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../functions/" class="md-nav__link">
        Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../recipes/" class="md-nav__link">
        Recipes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Chapter 5 - Push Notifications
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 5 - Push Notifications" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Chapter 5 - Push Notifications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter5/concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter5/android/" class="md-nav__link">
        Android Push
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter5/ios/" class="md-nav__link">
        iOS Push
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter5/windows/" class="md-nav__link">
        Windows Push
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter5/recipes/" class="md-nav__link">
        Push Recipes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Chapter 6 - Combining Web and Mobile Apps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 6 - Combining Web and Mobile Apps" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Chapter 6 - Combining Web and Mobile Apps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter6/mvc/" class="md-nav__link">
        MVC Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter6/jquery/" class="md-nav__link">
        jQuery Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter6/angular/" class="md-nav__link">
        Angular Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter6/react/" class="md-nav__link">
        React Applications
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Chapter 7 - Other Useful Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 7 - Other Useful Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Chapter 7 - Other Useful Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter7/services/" class="md-nav__link">
        Useful Azure Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter7/search/" class="md-nav__link">
        Azure Search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter7/media/" class="md-nav__link">
        Media Services
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Chapter 8 - Developing An App
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 8 - Developing An App" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Chapter 8 - Developing An App
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter8/developing/" class="md-nav__link">
        The Development Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter8/testing/" class="md-nav__link">
        Testing your Application
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Chapter 9 - Going to Production
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chapter 9 - Going to Production" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Chapter 9 - Going to Production
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter9/arm/" class="md-nav__link">
        Repeatable Deployments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter9/appsvc/" class="md-nav__link">
        Safe Deployments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../chapter9/monitoring/" class="md-nav__link">
        Monitoring and Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../xamarin_tips/" class="md-nav__link">
        Xamarin Forms Tips
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../android_appendix/" class="md-nav__link">
        Android Developer Notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../vs_extensions/" class="md-nav__link">
        Visual Studio Extensions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../references/" class="md-nav__link">
        References
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-database-clean-up-webjob" class="md-nav__link">
    A Database Clean Up WebJob
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-image-resizing-webjob" class="md-nav__link">
    An Image Resizing WebJob
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benefits-and-drawbacks-of-webjobs" class="md-nav__link">
    Benefits and Drawbacks of WebJobs
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/adrianhall/develop-mobile-apps-with-csharp-and-azure/edit/master/docs/chapter4/webjobs.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



  <h1>WebJobs</h1>

<p>I'd like to think that my mobile backend is self-managing.   Just like the App Service it is running on, it cleans up
after itself, always works and never needs a backup or maintenance.  Alas, some things can't be encoded in a client to
server transaction.  For example, in <a href="../../chapter3/dataconcepts/">chapter 3</a>, we discussed offline synchronization and the need for soft delete.
The soft delete process just marks the records as deleted.  In a busy database, those deleted records still take up
space and resources during searches.  One of the maintenance tasks we need to do is to clean up the database.</p>
<p>There is almost always a need for <a href="https://azure.microsoft.com/en-us/documentation/articles/best-practices-background-jobs/">backend processing</a> that is not related to the client-server communication.  That is
where <a href="https://azure.microsoft.com/en-us/services/functions/">Azure Functions</a> and <a href="https://azure.microsoft.com/en-us/documentation/articles/app-service-webjobs-readme/">WebJobs</a> come in.  They handle the custom processing that is not initiated by a mobile
client.  There are several examples aside from the aforementioned soft delete cleanup:</p>
<ul>
<li>You <a href="../recipes/#storage-related-operations">upload files</a> and want to process them before letting other users download them.</li>
<li>You want to do <a href="https://en.wikipedia.org/wiki/Sentiment_analysis">sentiment analysis</a> or other machine learning on incoming database records.</li>
<li>You need to do workflows like order fulfillment.</li>
<li>You need to handle data securely and cannot transmit it to the mobile client for processing.</li>
</ul>
<p>In all these cases, the initiation may come from the mobile client or it may be scheduled.  However, the defining
characteristic of these requirements is that the code must be run asynchronously (the mobile client is not waiting
for the result) and may take longer than the time for a normal request.</p>
<p>You can consider Azure Functions as "WebJobs as a Service".  WebJobs run on the same set of virtual machines that
are running your mobile backend.  They have access to the same resources (like CPU and memory), so they can interfere
with the running of your app.  Azure Functions can run this way as well, but they really take off when running in
Dynamic Compute mode (which is the default).  In Dynamic Compute, they run in spare compute power and potentially
on a completely different set of virtual machines, so they don't interfere with your mobile backend.</p>
<p>I recommend WebJobs for clean-up or maintenance tasks - things like cleaning up the database on a regular basis.
Event-driven tasks should be handled by Azure Functions.</p>
<h2 id="a-database-clean-up-webjob">A Database Clean Up WebJob<a class="headerlink" href="#a-database-clean-up-webjob" title="Permanent link">&para;</a></h2>
<p>As an example WebJob, let's implement the database clean-up process as a WebJob.  This will run on a regular
basis (say, once a day) and during processing, it will delete all records in our TodoItem table that are
deleted where the updatedAt field is older than 7 days.  The SQL command to run is this:</p>
<pre><code class="language-sql">DELETE FROM
    [dbo].[TodoItems]
WHERE
    [deleted] = 1 AND [updatedAt] &lt; DATEADD(day, -7, SYSDATETIMEOFFSET())
GO
</code></pre>
<p>A WebJob is always a separate project from your mobile backend.  To create a WebJob:</p>
<ul>
<li>Right click the solution.</li>
<li>Choose <strong>Add</strong> -&gt; <strong>New Item...</strong>.</li>
<li>
<p>Search for <strong>WebJob</strong>.</p>
<p><img alt="" src="../img/webjob-create-1.PNG" /></p>
</li>
<li>
<p>Select <strong>Azure WebJob</strong> with a <strong>Visual C#</strong> language.</p>
</li>
<li>Enter a suitable name for the WebJob and click <strong>Add</strong>.</li>
</ul>
<p>Once the scaffolding has finished and the package restore is done, you will see a <code>Program.cs</code> file.  A WebJob
is just a console application running with the WebJobs SDK.  By default, the WebJob will wait around for a
trigger.  We don't have a trigger since we are going to run this code each and every time the scheduler runs
it.  As a result, our code in Program.cs is relatively simple:</p>
<pre><code class="language-csharp">using System;
using System.Configuration;
using System.Data.SqlClient;
using System.Diagnostics;

namespace CleanupDatabaseWebJob
{
    class Program
    {
        static void Main()
        {
            var connectionString = ConfigurationManager.ConnectionStrings[&quot;MS_TableConnectionString&quot;].ConnectionString;

            using (SqlConnection sqlConnection = new SqlConnection(connectionString))
            {
                using (SqlCommand sqlCommand = sqlConnection.CreateCommand())
                {
                    Console.WriteLine(&quot;[CleanupDatabaseWebJob] Initiating SQL Connection&quot;);
                    sqlConnection.Open();

                    Console.WriteLine(&quot;[CleanupDatabaseWebJob] Executing SQL Statement&quot;);
                    sqlCommand.CommandText = &quot;DELETE FROM [dbo].[TodoItems] WHERE [deleted] = 1 AND [updatedAt] &lt; DATEADD(day, -7, SYSDATETIMEOFFSET())&quot;;
                    var rowsAffected = sqlCommand.ExecuteNonQuery();
                    Console.WriteLine($&quot;[CleanupDatabaseWebJob] {rowsAffected} rows deleted.&quot;);

                    sqlConnection.Close();
                }
            }
        }
    }
}
</code></pre>
<p>Debug messages that you want captured in the logs must be output with <code>Console.WriteLine</code>.  The <code>Debug</code>
channel is not captured in the logs.</p>
<p>You must also define the connection string in the <code>App.config</code> file of the WebJob project.  The scaffolding
creates two connection strings, but they are not normally defined in Azure App Service.  The following
defines the <code>MS_TableConnectionString</code> that is used by the mobile backend:</p>
<pre><code class="language-xml">  &lt;connectionStrings&gt;
    &lt;add name=&quot;MS_TableConnectionString&quot; connectionString=&quot;&quot; /&gt;
    &lt;add name=&quot;AzureWebJobsDashboard&quot; connectionString=&quot;&quot;/&gt;
    &lt;add name=&quot;AzureWebJobsStorage&quot; connectionString=&quot;&quot;/&gt;
  &lt;/connectionStrings&gt;
</code></pre>
<p>This is also defined (in the same way) in the <code>Web.config</code> file for the mobile backend.  Note the two
extra connection strings.  These are for running WebJobs, so you always need a connected storage account
to run WebJobs.  WebJobs will create a number of blob containers in your storage account.  These containers
all start with <code>azure-jobs</code> or <code>azure-webjobs</code>.  You should not mess with these in any way as they are
required for WebJobs functionality.   To set up the connection string, create a storage account. Once you have
created the storage account:</p>
<ul>
<li>Open the Storage account blade.</li>
<li>Click <strong>Access keys</strong> in the menu.</li>
<li>Right click the triple dot on the same line as <strong>key1</strong> and choose <strong>View connection string</strong>.</li>
<li>Copy the connection string, then click <strong>OK</strong>.</li>
<li>Close the Storage account blade.</li>
<li>Open the App Service blade for your mobile backend.</li>
<li>Click <strong>Application settings</strong> in the menu.</li>
<li>Scroll down to the <strong>Connection Strings</strong> section and add a new connection string:<ul>
<li>Enter <strong>AzureWebJobsDashboard</strong> for the connection string name.</li>
<li>Paste the connection string you copied earlier into the value.</li>
<li>Select <strong>Custom</strong> for the type of connection string.</li>
</ul>
</li>
<li>Repeat this process to create the <strong>AzureWebJobsStorage</strong> connection string.</li>
<li>Click <strong>Save</strong> at the top of the blade.</li>
</ul>
<p>To deploy a WebJob, we need to link it to our mobile backend:</p>
<ul>
<li>Right click the <strong>Backend</strong> project.</li>
<li>
<p>Select <strong>Add</strong> then <strong>Existing Project as Azure WebJob</strong>.</p>
<p><img alt="" src="../img/webjob-create-2.PNG" /></p>
</li>
<li>
<p>Fill in the <strong>Project name</strong> and <strong>WebJob name</strong> (if you named your project differently).</p>
</li>
<li>In <strong>WebJob run mode</strong>, select <strong>Run on Demand</strong>.</li>
</ul>
<p>This creates two files:</p>
<ul>
<li>The <code>webjobs-list.json</code> in the Backend project.</li>
<li>The <code>webjob-publish-settings.json</code> in the WebJob project.</li>
</ul>
<p>Visual Studio 2017 does not provide for running WebJobs on a scheduled basis.  You need to edit the <code>webjob-publish-settings.json</code> file.  For instance, to configure the WebJob as a scheduled job running once a day at 3am, use the following:</p>
<pre><code class="language-text">{
  &quot;$schema&quot;: &quot;http://schemastore.org/schemas/json/webjob-publish-settings.json&quot;,
  &quot;webJobName&quot;: &quot;CleanupDatabaseWebJob&quot;,
  &quot;startTime&quot;: &quot;2016-10-15T03:00:00-08:00&quot;,
  &quot;endTime&quot;: &quot;2016-10-16T04:00:00-08:00&quot;,
  &quot;jobRecurrenceFrequency&quot;: &quot;Day&quot;,
  &quot;interval&quot;: 1,
  &quot;runMode&quot;: &quot;Scheduled&quot;
}
</code></pre>
<p>The limits for the ending time ensures that your WebJob doesn't run forever.  You may have a WebJob that runs
a complicated report each night to consolidate a lot of data into something that can be downloaded by your
mobile client.  These reports can sometimes run for hours.  You should place reasonable limits on your WebJob
to ensure that they don't affect the operation of your site.</p>
<p>Right click your <strong>Backend</strong> project and select <strong>Publish...</strong></p>
<div class="admonition warn">
<p class="admonition-title">Warn</p>
<p>WebJobs use the <code>App_Data</code> area.  Ensure your publish profile does not delete files in the <code>App_Data</code> area.</p>
</div>
<p>Since you have published before, the dialog will be on the <strong>Preview</strong> tab.  Click on the <strong>Preview</strong> button
to generate a view of what would happen:</p>
<p><img alt="" src="../img/webjob-create-3.PNG" /></p>
<p>The WebJob has been bundled with your mobile backend for publication.  If you log into the portal, there are
several things you can do.  Go to your mobile backend.  In the menu, select <strong>WebJobs</strong> to see your configured
WebJob.  You can trigger a run of the WebJob independently of the schedule that you configured when you linked
the WebJob to the mobile backend.  You can also view the logs for the WebJob.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You will see an additional resource group when you created a scheduler WebJob.  This holds the Azure
Scheduler resource that you will use.  Azure Scheduler has a free tier which includes up to 3,600
job executions per month and 5 jobs.  Ensure you delete the scheduler if you are not using it.</p>
</div>
<h2 id="an-image-resizing-webjob">An Image Resizing WebJob<a class="headerlink" href="#an-image-resizing-webjob" title="Permanent link">&para;</a></h2>
<p>Scheduled WebJobs are great for report generation and maintenance tasks, but WebJobs can also be run continuously.
In a continuous mode, they wait for some trigger and then execute the code on that.  This is where the WebJobs
SDK comes in.</p>
<p>Let's take an example.  In our <a href="../recipes/#storage-related-operations">recipes</a> section, we have a method of uploading a photo to blob storage.
However, we don't have any in-built methods of controlling what is uploaded.  The Azure Storage SDK will allow
any file, so the user can upload a file that is not an image, or they can upload an image that is too big.
We can do something about this by running the following logic when a file is uploaded to the <code>userdata</code> area:</p>
<ul>
<li>If the file is an image:<ul>
<li>Resize the image to 800px x 600px.</li>
<li>Store the new file in the <code>publicdata</code> area.</li>
</ul>
</li>
<li>Delete the file from the <code>userdata</code> area.</li>
</ul>
<p>The monitoring is done lazily and depends on lots of factors (including how busy the storage account is).  It
may be several minutes before the service notices that a file is available.  To accomplish this, I am going to
do the processing of the file in one trigger function and the deletion in another, joining the two together via
an Azure Storage queue.  My first step is to adjust the WebJob <code>App.config</code> to include the storage connection
string:</p>
<pre><code class="language-xml">  &lt;connectionStrings&gt;
    &lt;add name=&quot;MS_AzureStorageAccountConnectionString&quot;, connectionString=&quot;&quot; /&gt;
    &lt;add name=&quot;AzureWebJobsDashboard&quot; connectionString=&quot;&quot;/&gt;
    &lt;add name=&quot;AzureWebJobsStorage&quot; connectionString=&quot;&quot;/&gt;
  &lt;/connectionStrings&gt;
</code></pre>
<p>My main program is in <code>Program.cs</code> as follows:</p>
<pre><code class="language-csharp">using Microsoft.Azure.WebJobs;
using Microsoft.WindowsAzure.Storage;
using Microsoft.WindowsAzure.Storage.Blob;
using Microsoft.WindowsAzure.Storage.Queue;
using System.Configuration;

namespace ImageResizeWebJob
{
    class Program
    {
        static void Main()
        {
            var connectionString = ConfigurationManager.ConnectionStrings[&quot;MS_AzureStorageAccountConnectionString&quot;].ConnectionString;
            CloudStorageAccount storageAccount = CloudStorageAccount.Parse(connectionString);
            CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
            CloudQueueClient queueClient = storageAccount.CreateCloudQueueClient();

            // Ensure the userdata area exists
            CloudBlobContainer userdata = blobClient.GetContainerReference(&quot;userdata&quot;);
            userdata.CreateIfNotExists();

            // Ensure the publicdata area exists
            CloudBlobContainer publicdata = blobClient.GetContainerReference(&quot;publicdata&quot;);
            publicdata.CreateIfNotExists();

            // Ensure the delete queue exists
            CloudQueue queue = queueClient.GetQueueReference(&quot;delete&quot;);
            queue.CreateIfNotExists();

            // Start running the WebJob
            var host = new JobHost();
            host.RunAndBlock();
        }
    }
}
</code></pre>
<p>We must ensure that the areas we are monitoring to trigger activity exist before the WebJob starts processing.
If we don't, there is nothing to trigger.  The WebJob will not find the appropriate hooks for monitoring and
the WebJob will likely not run.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For more information on creating Azure Storage, see the <a href="../recipes/#storage-related-operations">recipes</a> section of this chapter.</p>
</div>
<p>The actual trigger methods (called "functions") are located in the <code>Functions</code> class in the default namespace
of the WebJob.   All trigger methods are static methods with the following basic signature:</p>
<pre><code class="language-csharp">public static void ImageUploaded(
    [BlobTrigger(&quot;userdata/{name}.{ext}&quot;)] Stream input,
    string name,
    string ext,
    [Queue(&quot;delete&quot;)] out string path)
</code></pre>
<p>The first parameter is always the trigger.  In this case, I am triggering when a blob upload is complete.  A
trigger can optionally be parameterized as it is in this case.  The trigger parameters come next.  In this case,
I am extracting the filename and extension from the path of the uploaded file.  The final parameter is the
output binding.  For this trigger, I am going to write the path to be deleted to the delete queue so it can
be picked up by another function.</p>
<pre><code class="language-csharp">using Microsoft.Azure.WebJobs;
using Microsoft.WindowsAzure.Storage;
using Microsoft.WindowsAzure.Storage.Blob;
using System.Configuration;
using System.Diagnostics;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;
using System.IO;

namespace ImageResizeWebJob
{
    public class Functions
    {
        static int requiredHeight = 600;
        static int requiredWidth = 800;

        public static void ImageUploaded(
            [BlobTrigger(&quot;userdata/{name}.{ext}&quot;)] Stream input,
            string name,
            string ext,
            [Queue(&quot;delete&quot;)] out string path)
        {
            if (!ext.ToLowerInvariant().Equals(&quot;png&quot;))
            {
                Debug.WriteLine($&quot;BlobTrigger: userdata/{name}.{ext} - not a PNG file (skipping)&quot;);
                path = $&quot;{name}.{ext}&quot;;
                return;
            }

            // Read the blob stream into an Image object
            var image = Image.FromStream(input);

            // Process the image object
            if (image.Height &gt; requiredHeight || image.Width &gt; requiredWidth)
            {
                var destRect = new Rectangle(0, 0, requiredWidth, requiredHeight);
                var destImage = new Bitmap(requiredWidth, requiredHeight);

                destImage.SetResolution(image.HorizontalResolution, image.VerticalResolution);
                using (var graphics = Graphics.FromImage(destImage))
                {
                    graphics.CompositingMode = CompositingMode.SourceCopy;
                    graphics.CompositingQuality = CompositingQuality.Default;
                    graphics.InterpolationMode = InterpolationMode.Bicubic;
                    graphics.SmoothingMode = SmoothingMode.Default;
                    graphics.PixelOffsetMode = PixelOffsetMode.Default;
                    using (var wrapMode = new ImageAttributes())
                    {
                        wrapMode.SetWrapMode(WrapMode.TileFlipXY);
                        graphics.DrawImage(image, destRect, 0, 0, image.Width, image.Height, GraphicsUnit.Pixel, wrapMode);
                    }
                }
                // Replace the original image with the bitmap we created
                image = destImage;
            }

            // Write the image out to the publicdata area
            using (var stream = new MemoryStream())
            {
                image.Save(stream, ImageFormat.Png);
                stream.Position = 0;
                SaveFileToPublicBlob($&quot;{name}.{ext}&quot;, stream);
            }

            // Write the original path to the queue for deletion
            path = $&quot;{name}.{ext}&quot;;
        }

        static void SaveFileToPublicBlob(string file, Stream input)
        {
            var connectionString = ConfigurationManager.ConnectionStrings[&quot;MS_AzureStorageAccountConnectionString&quot;].ConnectionString;
            CloudStorageAccount storageAccount = CloudStorageAccount.Parse(connectionString);
            CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

            CloudBlobContainer publicdata = blobClient.GetContainerReference(&quot;publicdata&quot;);
            CloudBlockBlob blockBlob = publicdata.GetBlockBlobReference(file);
            blockBlob.UploadFromStream(input);
        }
    }
}
</code></pre>
<p>You are always going to write custom code in the middle of a function.  In this case, it's my image resizing
code.  Once the code is run, I write out the blob and put the path on the deletion queue.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To learn more about image resizing in C#, this <a href="http://stackoverflow.com/questions/1922040/resize-an-image-c-sharp">Stack Overflow</a> question has some great details.</p>
</div>
<p>Processing the queue is much easier than the image resizing:</p>
<pre><code class="language-csharp">    public static void ProcessDeleteQueue([QueueTrigger(&quot;delete&quot;)] string path)
    {
        var connectionString = ConfigurationManager.ConnectionStrings[&quot;MS_AzureStorageAccountConnectionString&quot;].ConnectionString;
        CloudStorageAccount storageAccount = CloudStorageAccount.Parse(connectionString);
        CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
        CloudBlobContainer userdata = blobClient.GetContainerReference(&quot;userdata&quot;);
        CloudBlockBlob blockBlob = userdata.GetBlockBlobReference(path);
        blockBlob.DeleteIfExists();
    }
</code></pre>
<p>You can connect this web job to your mobile backend project in the same way.  The <strong>WebJob run mode</strong> should be
set to <strong>Run Continuously</strong> instead of the schedule setting we used prior.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Azure App Service will turn off idle sites when they are not receiving requests.  If you have a WebJob that
needs to run irrespective of whether the App Service is receiving client requests, ensure the <strong>Always On</strong>
setting is turned on.  This setting is in <strong>Application settings</strong>.</p>
</div>
<p>To test the WebJob after publication:</p>
<ul>
<li>Connect an Azure Storage account to your mobile backend.  You can find instructions in the <a href="../recipes/#storage-related-operations">recipes</a> section.</li>
<li>In the mobile backend, select <strong>WebJobs</strong>, then your WebJob and click <strong>Start</strong>.</li>
<li>In Visual Studio, select the <strong>Cloud Explorer</strong>.  If you cannot see the Cloud Explorer, you can start it
   by selecting the <strong>View</strong> menu.</li>
<li>Expand the <strong>Storage Accounts</strong> node &gt; your storage account &gt; <strong>Blob Containers</strong> &gt; <code>userdata</code>.</li>
<li>Right click <code>userdata</code> and select <strong>Open Blob Container Editor</strong>.</li>
<li>Click the <strong>Upload Blob</strong> icon (it looks like a black up arrow).</li>
<li>Upload a suitable file for testing the process.</li>
</ul>
<h2 id="benefits-and-drawbacks-of-webjobs">Benefits and Drawbacks of WebJobs<a class="headerlink" href="#benefits-and-drawbacks-of-webjobs" title="Permanent link">&para;</a></h2>
<p>WebJobs are great for long running async batch processing and maintenance tasks.  When considering if WebJobs
are right for you:</p>
<ul>
<li>They are included with your App Service Plan.</li>
<li>They scale with your App Service Plan.</li>
<li>They are resilient to errors.</li>
<li>They are easy to run in isolation and debug.</li>
<li>They are managed and deployed with your mobile backend project.</li>
</ul>
<p>However,</p>
<ul>
<li>They may make your App Service use more resources than planned.</li>
<li>They can cause an automatic scale event on your App Service.</li>
</ul>
<!-- Images -->
<!-- Links -->

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../custom/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Custom HTTP Endpoints" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Custom HTTP Endpoints
            </div>
          </div>
        </a>
      
      
        
        <a href="../functions/" class="md-footer__link md-footer__link--next" aria-label="Next: Functions" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Functions
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2017-2020 Adrian Hall
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/adrianhall" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/FizzyInTheHall" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c2e1ee47.min.js"></script>
      
        <script src="../../js/highlight.pack.js"></script>
      
    
  </body>
</html>